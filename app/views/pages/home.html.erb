<% url_prefix = Rails.env.development? ? 'localhost:3000/api/v1' : 'dragonball-wiki-api.herokuapp.com/api/v1' %>

<div class="flex-evenly">
  <%= link_to 'See all characters', api_v1_characters_path, class: "button" %>
  <%= link_to 'See all planets', api_v1_planets_path, class: "button button-blue" %>
</div>

<h1>Dragonball Wiki API V1</h1>
<p>This site was made for educational purposes and for practicing interacting with an API.</p>
<h2>How to use this API:</h2>

<ul>
  <li>
    Click one of the buttons above to view all of that type.<br>
    Click the urls to get information about specific characters or planets.
  </li>

  <li>
    Utilize the data stored here to create your own website.
  </li>

  <li>Data is returned in JSON format. To make sure it's easily readable in your browser, you should use the JSON formatter chrome extension or something similar.</li>

  <li>
    Be sure to pay attention to the url suffixes for information.<br>
  </li>
  
  <li>
    Example of a url:<br>
    https://dragonball-wiki-api.herokuapp.com/api/v1/characters/20<br><br>
    <strong>Base url:</strong> <em>https://dragonball-wiki-api.herokuapp.com/</em><br><br>
    <strong>Extension:</strong> <em>api/v1/characters/20</em><br>
    (Gets character with the ID of 20)
  </li>
</ul>




<div class="border-bottom"></div>




<h3>Example 1: Get ALL characters <span><button class="button-blue" onclick="myFunction(this, 'ruby-example-1')">Show Ruby Code</button></span><span><small>** try to write your own code before viewing the example!</small></span></h3>
<figure id="ruby-example-1" style="display: none">
  <pre 
    aria-describedby="example1-description"><code contenteditable="true" tabindex="0" spellcheck="false">url = 'https://dragonball-wiki-api.herokuapp.com/api/v1/characters'
response = RestClient.get(url)
all_characters_array = JSON.parse(response)

all_characters_array[0]['name'] #=> 'Bardock'

raditz = all_characters_array[1]
raditz['planet']['name'] #=> 'Planet Vegeta'</code></pre>
</figure>

<h4>Results in this: (array of hashes, containing character information)</h4>
<figure>
  <pre 
    aria-describedby="example1-description"><code contenteditable="true" tabindex="0" spellcheck="false">// all_characters_array
[
  {
    "id"=>4,
    "name"=>"Bardock",
    "status"=>"Dead",
    "species"=>"Saiyan",
    "series"=>"Z",
    "gender"=>"Male",
    "image"=>"https://res.cloudinary.com/hmgjpnzby/image/upload/v1605858841/dragonball-wiki-api/Characters/Bardock_ymq9sy.png",
    "url"=>"https://dragonball-wiki-api.herokuapp.com/api/v1/characters/4",
    "planet": {
      "id": 6,
      "name": "Planet Vegeta",
      "url": "https://dragonball-wiki-api.herokuapp.com/api/v1/planets/6"
    }
  },

  {
    "id"=>5,
    "name"=>"Raditz",
    "status"=>"Dead",
    "species"=>"Saiyan",
    "series"=>"Z",
    "gender"=>"Male",
    "image"=>"https://res.cloudinary.com/hmgjpnzby/image/upload/v1605858855/dragonball-wiki-api/Characters/Raditz_l4efuy.png",
    "url"=>"https://dragonball-wiki-api.herokuapp.com/api/v1/characters/5",
    "planet": {
      "id": 6,
      "name": "Planet Vegeta",
      "url": "https://dragonball-wiki-api.herokuapp.com/api/v1/planets/6"
    }
  }
]</code></pre>
</figure>




<div class="border-bottom"></div>




<h3>Example 2: Get ONE character <span><button class="button-blue" onclick="myFunction(this, 'ruby-example-2')">Show Ruby Code</button></span><span><small>** try to write your own code before viewing the example!</small></span></h3>
<figure id="ruby-example-2" style="display: none">
  <pre 
    aria-describedby="example1-description"><code contenteditable="true" tabindex="0" spellcheck="false">url = 'https://dragonball-wiki-api.herokuapp.com/api/v1/characters/8'
response = RestClient.get(url)
character = JSON.parse(response)

character['name'] #=> 'Pan'


character['planet']['name'] #=> 'Earth'</code></pre>
</figure>

<h4>Results in this: (A hash with one character's information)</h4>
<figure>
  <pre 
    aria-describedby="example1-description"><code contenteditable="true" tabindex="0" spellcheck="false">// Single character hash
{
  "id"=>20,
  "name"=>"Pan",
  "status"=>"Alive",
  "species"=>"Saiyan/Human",
  "series"=>"Z",
  "gender"=>"Female",
  "image"=>"https://res.cloudinary.com/hmgjpnzby/image/upload/v1605858851/dragonball-wiki-api/Characters/Pan_fhmk1w.png",
  "url"=>"https://dragonball-wiki-api.herokuapp.com/api/v1/characters/20",
  "planet": {
    "id": 5,
    "name": "Earth",
    "url": "https://dragonball-wiki-api.herokuapp.com/api/v1/planets/5"
  }
}</code></pre>
</figure>


<div class="border-bottom"></div>




<h3>Example 3: Get ALL planets <span><button class="button-blue" onclick="myFunction(this, 'ruby-example-3')">Show Ruby Code</button></span><span><small>** try to write your own code before viewing the example!</small></span></h3>
<figure id="ruby-example-3" style="display: none">
  <pre 
    aria-describedby="example1-description"><code contenteditable="true" tabindex="0" spellcheck="false">url = 'https://dragonball-wiki-api.herokuapp.com/api/v1/planets'
response = RestClient.get(url)
all_planets_array = JSON.parse(response)

all_planets_array[1] #=> { "id"=>7, "name"=>"Earth"...}

all_planets_array[1]["name"] #=> "Earth"</code></pre>
</figure>

<h4>Results in this: (array of hashes, each containing planet information)</h4>
<figure>
  <pre 
    aria-describedby="example1-description"><code contenteditable="true" tabindex="0" spellcheck="false">// Array of planets
[
  {
    "id"=>6
    "name"=>"Planet Vegeta"
    "image"=>"https://res.cloudinary.com/hmgjpnzby/image/upload/v1605858749/dragonball-wiki-api/Planets/Planet_Vegeta_oyajmw.png"
    "url"=>"https://dragonball-wiki-api.herokuapp.com/api/v1/planets/6"
  },

  {
    "id"=>7
    "name"=>"Earth"
    "image"=>"https://res.cloudinary.com/hmgjpnzby/image/upload/v1605858749/dragonball-wiki-api/Planets/Earth_hglvfm.png"
    "url"=>"https://dragonball-wiki-api.herokuapp.com/api/v1/planets/7"
  }
]</code></pre>
</figure>


  

<div class="border-bottom"></div>




<h3>Example 4: Get ONE planet <span><button class="button-blue" onclick="myFunction(this, 'ruby-example-4')">Show Ruby Code</button></span><span><small>** try to write your own code before viewing the example!</small></span></h3>
<figure id="ruby-example-4" style="display: none">
  <pre 
    aria-describedby="example1-description"><code contenteditable="true" tabindex="0" spellcheck="false">url = 'https://dragonball-wiki-api.herokuapp.com/api/v1/planets/8'
response = RestClient.get(url)
planet = JSON.parse(response)

planet['name'] #=> 'Planet Vegeta'


planet['natives'] #=> ["character url 1, character url 2..."]</code></pre>
</figure>

<h4>Results in this: (A hash with one planet's information & a list of character urls from that planet)</h4>
<figure>
  <pre 
    aria-describedby="example1-description"><code contenteditable="true" tabindex="0" spellcheck="false">// Single planet hash
{
  "id": 8,
  "name": "Namek",
  "image": "https://res.cloudinary.com/hmgjpnzby/image/upload/v1605858748/dragonball-wiki-api/Planets/Namek_xtyloj.png",
  "url": "https://dragonball-wiki-api.herokuapp.com/api/v1/planets/8",
  "natives": [
    "https://dragonball-wiki-api.herokuapp.com/api/v1/characters/36",
    "https://dragonball-wiki-api.herokuapp.com/api/v1/characters/37"
  ]
}</code></pre>
</figure>



<script>
  // Adds numbers to code examples.
  (function()
  {
    if(typeof(window.getComputedStyle) == 'undefined') 
    { 
      return; 
    }
    var pre = document.getElementsByTagName('pre');
    for(var len = pre.length, i = 0; i < len; i ++)
    {
      var code = pre[i].getElementsByTagName('code').item(0);
      if(!code)
      {
        code = pre[i].getElementsByTagName('samp').item(0);
        if(!code)
        {
          continue;
        }
      }
      var column = document.createElement('div');
      column.setAttribute('aria-hidden', 'true');
      for(var n = 0; n < code.innerHTML.split(/\n/g).length; n++) // Splits code by linebreak, for each linebreak it adds a number span.
      {
        column.appendChild(document.createElement('span'));
      }
      pre[i].insertBefore(column, code);
      pre[i].className = 'line-numbers';
    }  
  })();

  // Function to hide / show rails example code.
  function myFunction(button, elToHide) {
    if (button.innerText === "Show Ruby Code") {
      button.innerText = "Hide Ruby Code";
      button.style.backgroundColor = "orangered";
    } else {
      button.innerText = "Show Ruby Code"
      button.style.backgroundColor = "steelblue";
    }
    var x = document.getElementById(elToHide);
    if (x.style.display === "none") {
      x.style.display = "block";
    } else {
      x.style.display = "none";
    }
  }
</script>